

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Architecture Considerations: Infrastructure Design &mdash; openFlightHPC-clusters  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Architecture Considerations: Storage Design" href="considerations-storage-design.html" />
    <link rel="prev" title="Architecture Considerations: Network and Hardware Design" href="considerations-network-design.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/openflighthpc-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Architecture</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="considerations.html">Architecture Considerations: General</a></li>
<li class="toctree-l1"><a class="reference internal" href="considerations-network-design.html">Architecture Considerations: Network and Hardware Design</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Architecture Considerations: Infrastructure Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#infrastructure-service-availability">Infrastructure Service Availability</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#all-in-one">All-in-one</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vm-platform">VM Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#high-availability-vm-platform">High Availability VM Platform</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#node-network-configuration">Node Network Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-examples">Configuration Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple-infrastructure">Simple Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#virtual-machine-infrastructure">Virtual Machine Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#channel-bonded-infrastructure">Channel Bonded Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vlan-infrastructure">VLAN Infrastructure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="considerations-storage-design.html">Architecture Considerations: Storage Design</a></li>
</ul>
<p class="caption"><span class="caption-text">Platform</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../platform/considerations.html">Platform Considerations: General</a></li>
</ul>
<p class="caption"><span class="caption-text">Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../environment/considerations.html">Environment Considerations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">openFlightHPC-clusters</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Architecture Considerations: Infrastructure Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/architecture/considerations-infrastructure-design.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="architecture-considerations-infrastructure-design">
<span id="id1"></span><h1>Architecture Considerations: Infrastructure Design<a class="headerlink" href="#architecture-considerations-infrastructure-design" title="Permalink to this headline">¶</a></h1>
<p>Infrastructure design largely relates to the considerations made for the <a class="reference internal" href="considerations-network-design.html#cluster-architectures"><span class="std std-ref">Cluster Architectures</span></a>. Depending on the design being us
ed, some of the infrastructure decisions may have already been made.</p>
<div class="section" id="infrastructure-service-availability">
<h2>Infrastructure Service Availability<a class="headerlink" href="#infrastructure-service-availability" title="Permalink to this headline">¶</a></h2>
<p>There are typically 3 possible service availability options to choose from, these are:</p>
<blockquote>
<div><ul class="simple">
<li>All-in-one</li>
<li>VM Platform</li>
<li>High Availability VM Platform</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If using a Cloud Platform then the service availability will be handled by the cloud provider. The only additional considerations are how services will be provided in terms of native running services or containerised.</p>
</div>
<p>These are covered in more detail below.</p>
<div class="section" id="all-in-one">
<h3>All-in-one<a class="headerlink" href="#all-in-one" title="Permalink to this headline">¶</a></h3>
<p>This is the most common solution, an all-in-one approach loads services onto a single machine which serves the network. It is the simpl
est solution as a single OS install is required and no additional configuration of virtual machine services is needed.</p>
<p>This solution, while quick and relatively easy to implement, is not a recommended approach. Due to the lack of redundancy options and t
he lack of service isolation there is a higher risk of an issue effecting one service (or the machine) to have an effect on other servi
ces.</p>
</div>
<div class="section" id="vm-platform">
<h3>VM Platform<a class="headerlink" href="#vm-platform" title="Permalink to this headline">¶</a></h3>
<p>A VM platform provides an additional layer of isolation between services. This can allow for services to be configured, migrated and modified without potentially effecting other services.</p>
<p>There are a number of solutions for hosting virtual machines, including:</p>
<blockquote>
<div><ul class="simple">
<li>Open-source solutions (e.g. VirtualBox, KVM, Xen)</li>
<li>Commercial solutions (e.g. VMware)</li>
</ul>
</div></blockquote>
<p>The above software solutions provide similar functionality and can all be used as a valid virtualisation platform. Further investigation into the ease of use, flexibility and features of the software is recommended to identify the ideal solution for your HPC platform.</p>
</div>
<div class="section" id="high-availability-vm-platform">
<h3>High Availability VM Platform<a class="headerlink" href="#high-availability-vm-platform" title="Permalink to this headline">¶</a></h3>
<p>For further redundancy, the virtualisation platform can utilise a resource pool. The service will be spread across multiple machines which allows for VMs to migrate between the hosts whilst still active. This live migration can allow for one of the hosts to be taken off of the network for maintenance without impacting the availability of the service VMs.</p>
</div>
</div>
<div class="section" id="node-network-configuration">
<h2>Node Network Configuration<a class="headerlink" href="#node-network-configuration" title="Permalink to this headline">¶</a></h2>
<p>In addition to the availability of services, the network configuration on the node can provide better performance and redundancy. Some of the network configuration options that can improve the infrastructure are:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Channel Bonding</strong> - Bonding interfaces allows for traffic to be shared between 2 network interfaces. If the bonded interfaces are connected to separate network switches then this solution</li>
<li><strong>Interface Bridging</strong> - Network bridges are used by interfaces on virtual machines to connect to the rest of the network. A bridge can sit on top of a channel bond such that the VM service network connection is constantly available.</li>
<li><strong>VLAN Interface Tagging</strong> - VLAN management can be performed both on a managed switch and on the node. The node is able to create subdivisions of network interfaces to add VLAN tags to packets. This will create separate interfaces that can be seen by the operating system (e.g. eth0.1 and eth0.2) which can individually have IP addresses set.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="configuration-examples">
<h2>Configuration Examples<a class="headerlink" href="#configuration-examples" title="Permalink to this headline">¶</a></h2>
<p>The example configurations here combine elements of the <a class="reference internal" href="considerations-network-design.html#architecture-considerations-network-design"><span class="std std-ref">Architecture Considerations: Network and Hardware Design</span></a>. These focus on the internal configuration of the master node but these examples can be extrapolated for configuring login, storage, compute or any other nodes that are part of the HPC environment.</p>
<div class="section" id="simple-infrastructure">
<h3>Simple Infrastructure<a class="headerlink" href="#simple-infrastructure" title="Permalink to this headline">¶</a></h3>
<img alt="Infrastructure Design Example 1" src="../_images/InfrastructureDesign1.png" />
<p>The simplest infrastructure configuration uses the all-in-one approach where services are configured on the master node’s operating system.</p>
</div>
<div class="section" id="virtual-machine-infrastructure">
<h3>Virtual Machine Infrastructure<a class="headerlink" href="#virtual-machine-infrastructure" title="Permalink to this headline">¶</a></h3>
<img alt="Infrastructure Design Example 2" src="../_images/InfrastructureDesign2.png" />
<p>This solution separates the services into VMs running on the master node. In order for these VMs to be able to connect to the primary network a network bridge is created that allows the VM interfaces to send traffic over the eth0 interface.</p>
</div>
<div class="section" id="channel-bonded-infrastructure">
<h3>Channel Bonded Infrastructure<a class="headerlink" href="#channel-bonded-infrastructure" title="Permalink to this headline">¶</a></h3>
<img alt="Infrastructure Design Example 3" src="../_images/InfrastructureDesign3.png" />
<p>This example adds a layer of redundancy over the <em>VM Infrastructure</em> design by bonding the eth0 and eth3 interfaces. These interfaces are connected to separate network switches (the switches will be bridged together as well) which provides redundancy should a switch or network interface fail. Bonding of the two interfaces creates a new <em>bond</em> interface that the bridge for the virtual machines connects to.</p>
</div>
<div class="section" id="vlan-infrastructure">
<h3>VLAN Infrastructure<a class="headerlink" href="#vlan-infrastructure" title="Permalink to this headline">¶</a></h3>
<img alt="Infrastructure Design Example 4" src="../_images/InfrastructureDesign4.png" />
<p>The above solution implements the channel bonded infrastructure in a network with VLANs. The VLANs have bond and bridge interfaces created for them. This allows some additional flexibility for VM bridging as virtual interfaces can be bridged onto specific VLANs whilst maintaining the redundancy provided by the bond. This adds additional security to the network as the master node can be left without an IP on certain VLAN bond interfaces which prevents that network from accessing the master node whilst VMs on the master node are able to reach that VLAN.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="considerations-storage-design.html" class="btn btn-neutral float-right" title="Architecture Considerations: Storage Design" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="considerations-network-design.html" class="btn btn-neutral float-left" title="Architecture Considerations: Network and Hardware Design" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, openFlightHPC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>